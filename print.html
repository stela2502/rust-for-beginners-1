<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rust for Beginners (Bioinformatics)</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-69c4c719.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-4e54c138.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust for Beginners (Bioinformatics)</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Programming in Rust is totally different from coding in C or C++ - and of cause also very different from coding in R or Python. I will talk about typed variables later on, but want to first highlight the security features Rust implements.</p>
<p>In Rust a variable is ‚Äòowned‚Äô by a function - possibly comparable to R. But instead of R which simply copies the data into every function in Rust the variables can not be changed inside of the function. It is especially prohibited to e.g. give a function a file object to write to. By default only the function that did create the file object can write to it.</p>
<p>This is also true for e.g a HashMap that stores objects (some data) in combination with e.g. a string key. If you want to modify the stored object you need the class that ‚Äòowns‚Äô this object make the changes. I have not hidden any of these problems inside this tutorial. That is something you need to learn the hard way.</p>
<h1 id="variables"><a class="header" href="#variables">Variables</a></h1>
<p>Rust uses strong typed variables. This does mean that you need to define your variables as a specific type.
As an example you can store integer values as u8, u16, u32, u64, u128, i8, i16, i32, i64, i128, usize or integer.
All of these types can not be compared against each other. So if you want to create some data structures it does help to choose the same type for all data (eg. u64).
The difference between the integer types are the range of values they can contain: u8 and i8 are 8 bit long whereas u128 and i128 are 128 bit long; the u types are unsigned and can not contain negative values.
Usize is the default integer type and is dependent on your computer type. On 64 bit computers it is the same as a u64 - but you still can not compare it directly to u64.</p>
<h2 id="target-audience"><a class="header" href="#target-audience">Target Audience</a></h2>
<p>This tutorial does not explain to you how to program. I assume you are absolutely able to do that.
In addition there a re tons of other tutorials that explain that to you.</p>
<p>What I found most important for my work is to try to understand code I have not written and hunt bugs I am not responsible for. In addition I assume you all benefit the most of a larger set of code snippets you can go back to and copy code from. Code you can double check how something could work.</p>
<h2 id="what-you-for-this-tutorial"><a class="header" href="#what-you-for-this-tutorial">What you For this Tutorial</a></h2>
<p>But first you need the Rust compiler. Best is - if you not already have it to follow <a href="https://rust-lang.org/tools/install/">the official axplanations</a>.
In addition I do recommend a programming GUI like the <a href="https://www.sublimetext.com/download">SublimeText</a> and <a href="https://www.sublimemerge.com/download">SublimeMerge</a> combination I use since years.</p>
<p>On windows I have seen an issue with a missing C++ linker.</p>
<p>You can install the missing linker and it‚Äôs libraries using windet:</p>
<pre><code>winget install Microsoft.VisualStudio.2022.BuildTools
</code></pre>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="variables-in-rust-hands-on-and-practical"><a class="header" href="#variables-in-rust-hands-on-and-practical">Variables in Rust (Hands-On and Practical)</a></h1>
<p>Let‚Äôs forget theory for a moment and just <em>touch</em> Rust.</p>
<p>Here is the simplest valid Rust program:</p>
<pre class="playground"><code class="language-rust">fn main() {
    let x = 5;
    let y = 7;
    let z = x * y;

    println!("{x} * {y} = {z}");
}</code></pre>
<p>You already learned something important just by reading this:</p>
<pre><code>let name = value;
</code></pre>
<p>That is how <strong>every variable</strong> starts in Rust.</p>
<hr>
<h2 id="1-variables-are-immutable-by-default"><a class="header" href="#1-variables-are-immutable-by-default">1. Variables are immutable by default</a></h2>
<p>This might surprise you:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
x = 10;   // ‚ùå COMPILER ERROR
<span class="boring">}</span></code></pre>
<p>Rust will not allow this.</p>
<p>Why?</p>
<p>Because <strong>by default, variables are read-only</strong>.</p>
<p>To allow modification, you must say it explicitly:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut x = 5;
x = 10;   // ‚úÖ works
<span class="boring">}</span></code></pre>
<p>This forces you to <em>think about change</em> instead of accidentally overwriting data.</p>
<hr>
<h2 id="2-types-exist--but-rust-usually-figures-them-out-for-you"><a class="header" href="#2-types-exist--but-rust-usually-figures-them-out-for-you">2. Types exist ‚Äî but Rust usually figures them out for you</a></h2>
<p>Rust is strongly typed, but it does <strong>not</strong> force you to write types everywhere.</p>
<p>You can write:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x = 5;
<span class="boring">}</span></code></pre>
<p>Rust magically understands:</p>
<blockquote>
<p>‚ÄúOh, that is an integer.‚Äù</p>
</blockquote>
<p>Most of the time, you let the compiler do the work.</p>
<p>But if you want to be precise:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x: u8 = 5;
let y: i32 = -7;
let z: usize = 42;
<span class="boring">}</span></code></pre>
<h3 id="integer-types-in-a-nutshell"><a class="header" href="#integer-types-in-a-nutshell">Integer types in a nutshell</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Meaning</th></tr>
</thead>
<tbody>
<tr><td><code>u8</code></td><td>unsigned 8-bit integer</td></tr>
<tr><td><code>i32</code></td><td>signed 32-bit integer</td></tr>
<tr><td><code>usize</code></td><td>index-sized integer</td></tr>
<tr><td><code>isize</code></td><td>signed index-sized</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="3-rust-does-not-mix-types-silently-"><a class="header" href="#3-rust-does-not-mix-types-silently-">3. Rust does not mix types silently üö®</a></h2>
<p>This program <strong>does not compile</strong>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let x: u8 = 5;
let y: u16 = 7;
let z = x * y;   // ‚ùå
<span class="boring">}</span></code></pre>
<p>Rust refuses.</p>
<p>Because mixing numeric types silently causes bugs.</p>
<p>Explicit conversion:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let z = (x as u16) * y;
<span class="boring">}</span></code></pre>
<hr>
<h2 id="4-strings-are-real-objects"><a class="header" href="#4-strings-are-real-objects">4. Strings are real objects</a></h2>
<p>Two important string types:</p>
<h3 id="string-slice-str"><a class="header" href="#string-slice-str">String slice (<code>&amp;str</code>)</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let name = "Alice";
<span class="boring">}</span></code></pre>
<h3 id="owned-string"><a class="header" href="#owned-string">Owned <code>String</code></a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let name = String::from("Alice");
<span class="boring">}</span></code></pre>
<p>Modify text:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut word = String::from("Hello");
word.push_str(" World");
<span class="boring">}</span></code></pre>
<hr>
<h2 id="5-collections"><a class="header" href="#5-collections">5. Collections</a></h2>
<h3 id="vector"><a class="header" href="#vector">Vector</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let numbers = vec![1, 2, 3, 4];
<span class="boring">}</span></code></pre>
<p>Iterate:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for n in &amp;numbers {
    println!("{n}");
}
<span class="boring">}</span></code></pre>
<h3 id="hashmap"><a class="header" href="#hashmap">HashMap</a></h3>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::collections::HashMap;

let mut ages = HashMap::new();
ages.insert("Alice", 32);
ages.insert("Bob", 27);
<span class="boring">}</span></code></pre>
<p>Lookup:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!("{}", ages["Alice"]);
<span class="boring">}</span></code></pre>
<hr>
<h2 id="6-ownership"><a class="header" href="#6-ownership">6. Ownership</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let a = String::from("Hello");
let b = a;
println!("{a}"); // ‚ùå
<span class="boring">}</span></code></pre>
<p>Ownership moved.</p>
<p>Duplicate explicitly:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let b = a.clone();
<span class="boring">}</span></code></pre>
<hr>
<h2 id="7-compiler-is-your-teacher"><a class="header" href="#7-compiler-is-your-teacher">7. Compiler is your teacher</a></h2>
<p>Example error:</p>
<pre><code>error[E0308]: mismatched types
expected u8, found u16
</code></pre>
<p>Explain it:</p>
<pre><code class="language-bash">rustc --explain E0308
</code></pre>
<hr>
<h1 id="summary"><a class="header" href="#summary">Summary</a></h1>
<p>‚úÖ Variables<br>‚úÖ Mutability<br>‚úÖ Types<br>‚úÖ Strings<br>‚úÖ Vectors &amp; Maps<br>‚úÖ Ownership<br>‚úÖ Helpful compiler</p>
<p>Rust forces correctness early.</p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="creating-a-rust-package-and-loading-data-hands-on"><a class="header" href="#creating-a-rust-package-and-loading-data-hands-on">Creating a Rust Package and Loading Data (Hands-On)</a></h1>
<p>In this chapter we <strong>build a real Rust package</strong> that loads a numeric table from disk
and stores it in a data structure we can later use for clustering (e.g. k-means).</p>
<p>You will:</p>
<p>‚úÖ create a Rust package<br>‚úÖ write a real data table struct<br>‚úÖ load a file<br>‚úÖ parse numeric values<br>‚úÖ handle errors<br>‚úÖ test your code</p>
<p>This chapter is not theory. You will <strong>type this code</strong>.</p>
<hr>
<h1 id="1-create-a-new-package"><a class="header" href="#1-create-a-new-package">1. Create a new package</a></h1>
<p>Open a terminal:</p>
<pre><code class="language-bash">cargo new data_table --bin
cd data_table
</code></pre>
<p>Project structure:</p>
<pre><code>data_table/
‚îî‚îÄ‚îÄ src/
    ‚îî‚îÄ‚îÄ main.rs
</code></pre>
<hr>
<h1 id="2-add-dependencies"><a class="header" href="#2-add-dependencies">2. Add dependencies</a></h1>
<p>Edit <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[package]
name = "data_table"
version = "0.1.0"
edition = "2021"

[dependencies]
clap = { version = "4", features = ["derive"] }
</code></pre>
<hr>
<h1 id="3-create-module-structure"><a class="header" href="#3-create-module-structure">3. Create module structure</a></h1>
<p>Create two new files:</p>
<pre><code>src/
  main.rs
  lib.rs
  data.rs
</code></pre>
<hr>
<h1 id="4-hook-the-library-into-rust"><a class="header" href="#4-hook-the-library-into-rust">4. Hook the library into Rust</a></h1>
<p>Edit <code>src/lib.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub mod data;
<span class="boring">}</span></code></pre>
<p>This tells Rust that <code>data.rs</code> is part of your package.</p>
<hr>
<h1 id="5-implement-the-data-table"><a class="header" href="#5-implement-the-data-table">5. Implement the data table</a></h1>
<p>Edit <code>src/data.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use std::io::{BufRead, BufReader};

/// A simple numeric table
pub struct DataTable {
    pub rows: usize,
    pub cols: usize,
    pub rownames: Vec&lt;String&gt;,
    pub data: Vec&lt;f64&gt;,
}

impl DataTable {
    /// Create a new empty table
    pub fn new() -&gt; Self {
        Self {
            rows: 0,
            cols: 0,
            rownames: Vec::new(),
            data: Vec::new(),
        }
    }

    /// Load a TSV or CSV file
    pub fn read_file(path: &amp;str, sep: char) -&gt; Self {
        let file = File::open(path).expect("Cannot open file");
        let reader = BufReader::new(file);

        let mut table = DataTable::new();
        let mut header = true;

        for line in reader.lines() {
            let line = line.expect("Read error");

            // Skip header line
            if header {
                header = false;
                continue;
            }

            let mut first = true;
            let mut col_count = 0;

            for mut val in line.split(sep) {
                if first {
                    table.rownames.push(val.to_string());
                    first = false;
                } else {
                    val = val.trim();
                    let v = match val.parse::&lt;f64&gt;() {
                        Ok(n) =&gt; n,
                        Err(_) =&gt; 0.0,
                    };
                    table.data.push(v);
                    col_count += 1;
                }
            }

            if table.cols == 0 {
                table.cols = col_count;
            }

            table.rows += 1;
        }

        table
    }

    pub fn get(&amp;self, row: usize, col: usize) -&gt; f64 {
        self.data[row * self.cols + col]
    }

    pub fn print(&amp;self) {
        println!("rows: {}, cols: {}", self.rows, self.cols);

        for r in 0..self.rows {
            print!("{}\t", self.rownames[r]);
            for c in 0..self.cols {
                print!("{}\t", self.get(r, c));
            }
            println!();
        }
    }
}
<span class="boring">}</span></code></pre>
<hr>
<h1 id="6-explain-what-just-happened"><a class="header" href="#6-explain-what-just-happened">6. Explain what just happened</a></h1>
<h2 id="the-struct"><a class="header" href="#the-struct">The struct</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct DataTable {
    pub rows: usize,
    pub cols: usize,
    pub rownames: Vec&lt;String&gt;,
    pub data: Vec&lt;f64&gt;,
}
<span class="boring">}</span></code></pre>
<p>This is your first real <strong>data structure</strong>.</p>
<p>We store:</p>
<ul>
<li>dimensions</li>
<li>names</li>
<li>flattened numeric matrix (<code>data</code>)</li>
</ul>
<p>This layout is efficient and perfect for k-means later.</p>
<hr>
<h2 id="parsing-numbers-safely"><a class="header" href="#parsing-numbers-safely">Parsing numbers safely</a></h2>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let v = match val.parse::&lt;f64&gt;() {
    Ok(n) =&gt; n,
    Err(_) =&gt; 0.0,
};
<span class="boring">}</span></code></pre>
<p>Rust refuses to assume input is valid.
We choose to replace invalid values with <code>0.0</code>.</p>
<hr>
<h2 id="memory-layout"><a class="header" href="#memory-layout">Memory layout</a></h2>
<p>Indexing logic:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>row * cols + col
<span class="boring">}</span></code></pre>
<p>This stores the table <strong>row-major</strong> ‚Äî just like NumPy and C.</p>
<hr>
<h1 id="7-write-the-executable"><a class="header" href="#7-write-the-executable">7. Write the executable</a></h1>
<p>Edit <code>src/main.rs</code>:</p>
<pre class="playground"><code class="language-rust">use clap::Parser;
use data_table::data::DataTable;

#[derive(Parser)]
struct Opts {
    #[arg(short, long)]
    data: String,

    #[arg(short, long, default_value = "\t")]
    sep: String,
}

fn main() {
    let opts = Opts::parse();
    let sep: char = opts.sep.chars().next().unwrap();

    let table = DataTable::read_file(&amp;opts.data, sep);
    table.print();
}</code></pre>
<hr>
<h1 id="8-build-the-program"><a class="header" href="#8-build-the-program">8. Build the program</a></h1>
<pre><code class="language-bash">cargo build -r
</code></pre>
<hr>
<h1 id="9-run-on-a-real-file"><a class="header" href="#9-run-on-a-real-file">9. Run on a real file</a></h1>
<p>Example <code>data.tsv</code>:</p>
<pre><code>gene A B C
g1 1.1 2.3 4.5
g2 4.0 0.2 1.8
</code></pre>
<p>Run:</p>
<pre><code class="language-bash">target/release/data_table -d data.tsv
</code></pre>
<p>You should see the table printed.</p>
<hr>
<h1 id="10-tests-you-should-test-your-code"><a class="header" href="#10-tests-you-should-test-your-code">10. Tests (you SHOULD test your code)</a></h1>
<p>Add to <code>src/data.rs</code>:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn read_mock_table() {
        let input = "x\ta\tb\nc1\t1\t2\nc2\t3\t4";
        std::fs::write("/tmp/test.tsv", input).unwrap();

        let t = DataTable::read_file("/tmp/test.tsv", '\t');
        assert_eq!(t.rows, 2);
        assert_eq!(t.cols, 2);
        assert_eq!(t.get(1, 1), 4.0);
    }
}
<span class="boring">}</span></code></pre>
<p>Run:</p>
<pre><code class="language-bash">cargo test
</code></pre>
<hr>
<h1 id="summary-1"><a class="header" href="#summary-1">Summary</a></h1>
<p>You now built:</p>
<p>‚úÖ a real package<br>‚úÖ a real data structure<br>‚úÖ file parsing<br>‚úÖ error handling<br>‚úÖ indexing logic<br>‚úÖ a test suite</p>
<p>This is the foundation for:</p>
<blockquote>
<p>clustering, PCA, k-means, distance computation</p>
</blockquote>
<hr>
<h1 id="next"><a class="header" href="#next">Next</a></h1>
<p>Next chapter:
<strong>Computing distances and centroids</strong></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="walking-through-the-datatable-code-line-by-line"><a class="header" href="#walking-through-the-datatable-code-line-by-line">Walking Through the DataTable Code (Line by Line)</a></h1>
<p>In this section we walk slowly and carefully through the <strong>entire <code>DataTable</code> implementation</strong>.
This is the heart of your program. Understanding this file means you understand how Rust stores data.</p>
<hr>
<h1 id="1-importing-filesystem-and-io-tools"><a class="header" href="#1-importing-filesystem-and-io-tools">1. Importing filesystem and IO tools</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs::File;
use std::io::{BufRead, BufReader};
<span class="boring">}</span></code></pre>
<p>These two lines bring in tools from Rust‚Äôs standard library:</p>
<ul>
<li><code>File</code> ‚Üí open files from disk</li>
<li><code>BufReader</code> ‚Üí read files efficiently, line by line</li>
<li><code>BufRead</code> ‚Üí gives us <code>.lines()</code> to iterate over file lines</li>
</ul>
<p>Rust requires imports explicitly ‚Äî nothing is magically available.</p>
<hr>
<h1 id="2-defining-the-datatable-structure"><a class="header" href="#2-defining-the-datatable-structure">2. Defining the DataTable structure</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct DataTable {
    pub rows: usize,
    pub cols: usize,
    pub rownames: Vec&lt;String&gt;,
    pub data: Vec&lt;f64&gt;,
}
<span class="boring">}</span></code></pre>
<p>This defines a <strong>data structure</strong>.</p>
<p>We store:</p>
<ul>
<li><code>rows</code> ‚Üí number of rows</li>
<li><code>cols</code> ‚Üí number of columns</li>
<li><code>rownames</code> ‚Üí first column (e.g. gene names)</li>
<li><code>data</code> ‚Üí numeric values stored in one flat vector</li>
</ul>
<p>Rust does not have <em>classes</em> ‚Äî it has <strong>structs</strong> and <code>impl</code> blocks.</p>
<p>This design is intentional:</p>
<p>We store the table as:</p>
<pre><code>row-major order (flattened matrix)
</code></pre>
<p>Indexing is done by:</p>
<pre><code>row * cols + col
</code></pre>
<p>Which makes numeric computation fast later.</p>
<hr>
<h1 id="3-constructor-creating-an-empty-table"><a class="header" href="#3-constructor-creating-an-empty-table">3. Constructor: creating an empty table</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn new() -&gt; Self {
    Self {
        rows: 0,
        cols: 0,
        rownames: Vec::new(),
        data: Vec::new(),
    }
}
<span class="boring">}</span></code></pre>
<p>This function creates a new empty table.</p>
<p>Notes:</p>
<ul>
<li><code>Self</code> refers to <code>DataTable</code></li>
<li><code>Vec::new()</code> creates empty vectors</li>
<li>We initialize dimensions with <code>0</code></li>
</ul>
<p>Rust does not allow uninitialized memory. Everything is always valid.</p>
<hr>
<h1 id="4-loading-a-file"><a class="header" href="#4-loading-a-file">4. Loading a file</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn read_file(path: &amp;str, sep: char) -&gt; Self {
<span class="boring">}</span></code></pre>
<p>Function parameters:</p>
<ul>
<li><code>path</code> ‚Üí path to file</li>
<li><code>sep</code> ‚Üí column separator (e.g. <code>\t</code> for TSV, <code>,</code> for CSV)</li>
</ul>
<p>Return value:</p>
<pre><code>Self = DataTable
</code></pre>
<hr>
<h1 id="5-open-and-wrap-the-file"><a class="header" href="#5-open-and-wrap-the-file">5. Open and wrap the file</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let file = File::open(path).expect("Cannot open file");
let reader = BufReader::new(file);
<span class="boring">}</span></code></pre>
<ul>
<li><code>File::open()</code> returns a <code>Result</code></li>
<li><code>.expect()</code> crashes gracefully with a readable message</li>
<li><code>BufReader</code> improves performance for large files</li>
</ul>
<hr>
<h1 id="6-setting-up-state"><a class="header" href="#6-setting-up-state">6. Setting up state</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut table = DataTable::new();
let mut header = true;
<span class="boring">}</span></code></pre>
<p>We prepare:</p>
<ul>
<li>an empty table</li>
<li>a flag to skip the header row</li>
</ul>
<p>Rust forces explicit mutability:</p>
<p><code>mut</code> ‚Üí this value will change.</p>
<hr>
<h1 id="7-reading-line-by-line"><a class="header" href="#7-reading-line-by-line">7. Reading line by line</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for line in reader.lines() {
    let line = line.expect("Read error");
<span class="boring">}</span></code></pre>
<p>Why <code>expect()</code> again?</p>
<p>Because:</p>
<pre><code>line is Result&lt;String, Error&gt;
</code></pre>
<p>Rust never ignores failure.</p>
<hr>
<h1 id="8-skipping-header"><a class="header" href="#8-skipping-header">8. Skipping header</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if header {
    header = false;
    continue;
}
<span class="boring">}</span></code></pre>
<p>We drop the first line and move on.</p>
<hr>
<h1 id="9-parsing-a-row"><a class="header" href="#9-parsing-a-row">9. Parsing a row</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut first = true;
let mut col_count = 0;
<span class="boring">}</span></code></pre>
<p>Flags:</p>
<ul>
<li><code>first</code> ‚Üí first column = row name</li>
<li><code>col_count</code> ‚Üí how many numeric columns did we see?</li>
</ul>
<hr>
<h1 id="10-splitting-each-cell"><a class="header" href="#10-splitting-each-cell">10. Splitting each cell</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>for mut val in line.split(sep) {
<span class="boring">}</span></code></pre>
<ul>
<li><code>.split(sep)</code> breaks the line</li>
<li><code>mut val</code> because we want to overwrite it</li>
<li>Each <code>val</code> is <code>&amp;str</code></li>
</ul>
<hr>
<h1 id="11-first-column-row-names"><a class="header" href="#11-first-column-row-names">11. First column: row names</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if first {
    table.rownames.push(val.to_string());
    first = false;
}
<span class="boring">}</span></code></pre>
<p>The first field is the row label.</p>
<hr>
<h1 id="12-parsing-numeric-values"><a class="header" href="#12-parsing-numeric-values">12. Parsing numeric values</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>val = val.trim();

let v = match val.parse::&lt;f64&gt;() {
    Ok(n) =&gt; n,
    Err(_) =&gt; 0.0,
};
<span class="boring">}</span></code></pre>
<p>Rust will NOT guess.
Rust will NOT fake conversion.
Rust forces correctness.</p>
<p>If parsing fails:
‚Üí we replace with <code>0.0</code>.</p>
<hr>
<h1 id="13-store-values"><a class="header" href="#13-store-values">13. Store values</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>table.data.push(v);
col_count += 1;
<span class="boring">}</span></code></pre>
<p>We append values in row-major order.</p>
<hr>
<h1 id="14-set-column-count-once"><a class="header" href="#14-set-column-count-once">14. Set column count once</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if table.cols == 0 {
    table.cols = col_count;
}
<span class="boring">}</span></code></pre>
<p>We set column count only for the first row.</p>
<hr>
<h1 id="15-increase-row-count"><a class="header" href="#15-increase-row-count">15. Increase row count</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>table.rows += 1;
<span class="boring">}</span></code></pre>
<hr>
<h1 id="16-return-the-object"><a class="header" href="#16-return-the-object">16. Return the object</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>table
<span class="boring">}</span></code></pre>
<p>Final expression = return value.</p>
<p>No <code>return</code> keyword needed.</p>
<hr>
<h1 id="17-random-access-get-value"><a class="header" href="#17-random-access-get-value">17. Random access: get value</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn get(&amp;self, row: usize, col: usize) -&gt; f64 {
    self.data[row * self.cols + col]
}
<span class="boring">}</span></code></pre>
<p>This computes the index into the flat array.</p>
<p>Memory layout:</p>
<pre><code>[ row0 | row1 | row2 | ... ]
</code></pre>
<hr>
<h1 id="18-print-the-table"><a class="header" href="#18-print-the-table">18. Print the table</a></h1>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn print(&amp;self) { ... }
<span class="boring">}</span></code></pre>
<p>We print row by row using <code>get()</code>.</p>
<hr>
<h1 id="what-you-just-learned"><a class="header" href="#what-you-just-learned">What you just learned</a></h1>
<p>‚úÖ struct and impl<br>‚úÖ ownership and mutability<br>‚úÖ error handling<br>‚úÖ Result types<br>‚úÖ memory layout<br>‚úÖ parsing input<br>‚úÖ index computation</p>
<hr>
<h1 id="why-this-matters"><a class="header" href="#why-this-matters">Why this matters</a></h1>
<p>Everything advanced depends on this:</p>
<ul>
<li>distance computation</li>
<li>k-means</li>
<li>PCA</li>
<li>scaling</li>
<li>dot products</li>
</ul>
<p>If you understand this file ‚Äî you understand the backbone of Rust-based numeric computing.</p>
<hr>
<h1 id="next-1"><a class="header" href="#next-1">Next</a></h1>
<p>Next chapter:
<strong>Distance metrics and vector math in Rust</strong></p>
<div style="break-before: page; page-break-before: always;"></div>
<h1 id="k-means-clustering--mathematical-introduction-mdbook-compatible"><a class="header" href="#k-means-clustering--mathematical-introduction-mdbook-compatible">K-Means Clustering ‚Äî Mathematical Introduction (mdBook Compatible)</a></h1>
<p>This version uses <strong>mdBook-compatible math formatting</strong> (single <code>$</code> and <code>$$</code> blocks).</p>
<hr>
<h1 id="1-what-is-k-means"><a class="header" href="#1-what-is-k-means">1. What is k-means?</a></h1>
<p>k-means is an <strong>unsupervised clustering algorithm</strong>.</p>
<p>You provide:</p>
<ul>
<li>a numeric data matrix</li>
<li>a number <code>k</code> (number of clusters)</li>
</ul>
<p>The algorithm finds:</p>
<blockquote>
<p>Clusters where distances within clusters are minimal and distances between clusters are maximal.</p>
</blockquote>
<hr>
<h1 id="2-data-representation"><a class="header" href="#2-data-representation">2. Data Representation</a></h1>
<p>Each row in the data table is a vector:</p>
<p>$$
x_i = (x_{i1}, x_{i2}, ‚Ä¶, x_{in})
$$</p>
<p>Where:</p>
<ul>
<li>$i$ = data point index</li>
<li>$n$ = number of columns (features)</li>
</ul>
<hr>
<h1 id="3-distance-function-euclidean"><a class="header" href="#3-distance-function-euclidean">3. Distance Function (Euclidean)</a></h1>
<p>For two vectors:</p>
<p>$$
x = (x_1, x_2, ‚Ä¶, x_n)
$$</p>
<p>$$
y = (y_1, y_2, ‚Ä¶, y_n)
$$</p>
<p>Distance:</p>
<p>$$
d(x,y) = \sqrt{\sum_{k=1}^{n} (x_k - y_k)^2}
$$</p>
<p>Rust goal:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn euclidean(a: &amp;[f64], b: &amp;[f64]) -&gt; f64
<span class="boring">}</span></code></pre>
<hr>
<h1 id="4-clusters-and-centroids"><a class="header" href="#4-clusters-and-centroids">4. Clusters and Centroids</a></h1>
<p>Each cluster has a centroid:</p>
<p>$$
\mu_j = (\mu_{j1}, \mu_{j2}, ‚Ä¶, \mu_{jn})
$$</p>
<p>Centroid definition:</p>
<p>$$
\mu_{jk} = \frac{1}{|C_j|} \sum_{x \in C_j} x_k
$$</p>
<p>Where:</p>
<ul>
<li>$C_j$: points assigned to cluster j</li>
<li>$|C_j|$: size of the cluster</li>
<li>$k$: column index</li>
</ul>
<p>Rust goal:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn recompute_centroid(points: &amp;[usize], data: &amp;DataTable) -&gt; Vec&lt;f64&gt;
<span class="boring">}</span></code></pre>
<hr>
<h1 id="5-algorithm-steps-mathematical-form"><a class="header" href="#5-algorithm-steps-mathematical-form">5. Algorithm Steps (Mathematical Form)</a></h1>
<h2 id="step-1-initialize-centroids"><a class="header" href="#step-1-initialize-centroids">Step 1: Initialize Centroids</a></h2>
<p>Choose $k$ initial points:</p>
<p>$$
\mu_1, \mu_2, ‚Ä¶, \mu_k
$$</p>
<p>Rust goal:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn init_centroids(data: &amp;DataTable, k: usize) -&gt; Vec&lt;Vec&lt;f64&gt;&gt;
<span class="boring">}</span></code></pre>
<hr>
<h2 id="step-2-assign-points"><a class="header" href="#step-2-assign-points">Step 2: Assign Points</a></h2>
<p>Each point is assigned to nearest centroid:</p>
<p>$$
cluster(x_i) = \arg\min_j d(x_i, \mu_j)
$$</p>
<p>Rust goal:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn assign_clusters(data: &amp;DataTable, centroids: &amp;[Vec&lt;f64&gt;]) -&gt; Vec&lt;usize&gt;
<span class="boring">}</span></code></pre>
<hr>
<h2 id="step-3-update-centroids"><a class="header" href="#step-3-update-centroids">Step 3: Update Centroids</a></h2>
<p>$$
\mu_j = \frac{1}{|C_j|} \sum_{x \in C_j} x
$$</p>
<p>Rust goal:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn update_centroids(assignments: &amp;[usize], data: &amp;DataTable, k: usize) -&gt; Vec&lt;Vec&lt;f64&gt;&gt;
<span class="boring">}</span></code></pre>
<hr>
<h2 id="step-4-convergence"><a class="header" href="#step-4-convergence">Step 4: Convergence</a></h2>
<p>Stop when centroids no longer shift significantly.</p>
<p>Centroid movement:</p>
<p>$$
\Delta = \sum_{j=1}^{k} || \mu_j^{(old)} - \mu_j^{(new)} ||
$$</p>
<p>Rust goal:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn has_converged(old: &amp;[Vec&lt;f64&gt;], new: &amp;[Vec&lt;f64&gt;], tol: f64) -&gt; bool
<span class="boring">}</span></code></pre>
<hr>
<h1 id="6-objective-function"><a class="header" href="#6-objective-function">6. Objective Function</a></h1>
<p>K-means minimizes <strong>within-cluster sum of squares</strong>:</p>
<p>$$
J = \sum_{j=1}^{k} \sum_{x \in C_j} || x - \mu_j ||^2
$$</p>
<hr>
<h1 id="7-pseudocode"><a class="header" href="#7-pseudocode">7. Pseudocode</a></h1>
<pre><code>initialize centroids
repeat:
    assign points
    recompute centroids
until converged
</code></pre>
<hr>
<h1 id="8-common-problems"><a class="header" href="#8-common-problems">8. Common Problems</a></h1>
<ul>
<li>Bad initialization</li>
<li>Wrong number of clusters</li>
<li>Different feature scales</li>
</ul>
<p>Fixes:</p>
<ul>
<li>k-means++ (later)</li>
<li>normalization</li>
<li>silhouette score</li>
</ul>
<hr>
<h1 id="9-mapping-mathematics-to-rust"><a class="header" href="#9-mapping-mathematics-to-rust">9. Mapping mathematics to Rust</a></h1>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Math</th><th>Rust</th></tr>
</thead>
<tbody>
<tr><td>$d(x,y)$</td><td><code>euclidean()</code></td></tr>
<tr><td>$\arg\min$</td><td><code>assign_clusters()</code></td></tr>
<tr><td>mean</td><td><code>update_centroids()</code></td></tr>
<tr><td>movement</td><td><code>has_converged()</code></td></tr>
<tr><td>algorithm</td><td><code>kmeans()</code></td></tr>
</tbody>
</table>
</div>
<hr>
<h1 id="next-chapter"><a class="header" href="#next-chapter">Next Chapter</a></h1>
<p>Implement:</p>
<blockquote>
<p>Distance functions in Rust</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>


    </div>
    </body>
</html>
